while (atomicCAS(&mutex, 1, 0) == 0)

void lock(int *addr) {
    while(atomicCAS(addr, 0, 1) == 1) {}
}

write_fence:
to implement unlock

while (1) {
    if (*addr == 1) {
        if (atomicCAS(addr, 1, 0) == 1) break;
    }
}

while (1) {
    while (*Addr == 1) {};
    if (atomicCAS(addr, 0, 1) == 0) break;
}

lock-free:
Very optimistic, 


Transaction:
Sequence process

BW bound:
locality
compress data
Better hardware, faster memory
ASIC

Spark:
